<!DOCTYPE html>
<html lang="en-us">
  <head>



  
  
    
  
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-F41GEVVR9Y"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-F41GEVVR9Y');
</script>

  



<link rel="canonical" href="https://architect.proyectoomega.es/iac/terraform/terraformcloudfunctions/" />


  <meta charset="utf-8" />
  <title>Terraform  GCP Cloud Functions</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="generator" content="Hugo 0.99.1" />
  <meta name="description" content="Terraform  GCP Cloud Functions - This a website for cloud architects to find usefull resources. Created by Juan Antonio Estival to help others with snipets of aws, gcp, terraform, static websties, react and others " />
  <meta name="keywords" content="gcloud,, google, cloud, platform,, gcp,, remote, development,, terraform,, juan, antonio, estival,, cloud, functions">
 
  
  
  <meta name="robots" content="noindex,nofollow">
  
  

  
  <link
    rel="stylesheet"
    href="https://architect.proyectoomega.es/plugins/bootstrap/bootstrap.min.css"
  />


  
  <link
    rel="stylesheet"
    href="https://architect.proyectoomega.es/plugins/themify-icons/themify-icons.css"
  />

  
  <link
    rel="icon"
    href="https://architect.proyectoomega.es/images/favicon.png"
    type="image/x-icon"
  />

  
  <link
    href="https://fonts.googleapis.com/css?family=Nunito:300,400,700&display=swap"
    rel="stylesheet"
  />

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.9.359/pdf.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.js"></script>

  <style>
    :root{
      --primary-color:#006385;
      --body-color:#d2e0ce;
      --text-color:#636363;
      --text-color-dark:#242738;
      --white-color:#ffffff;
      --light-color:#f8f9fa;
      --font-family:Nunito;
    }
  </style>

  
  
  <link href="https://architect.proyectoomega.es/css/style.min.css" rel="stylesheet" media="screen" />

  
  
  <script src="https://architect.proyectoomega.es/plugins/jquery/jquery-1.12.4.js"></script>

  
  <script src="https://architect.proyectoomega.es/plugins/jquery/jquery-ui.js"></script>

  
  <script src="https://architect.proyectoomega.es/plugins/bootstrap/bootstrap.min.js"></script>

  
  <script src="https://architect.proyectoomega.es/plugins/match-height/jquery.matchHeight-min.js"></script>

  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-F41GEVVR9Y"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-F41GEVVR9Y', { 'anonymize_ip': false });
}
</script>
 
  
  

  
     
  <meta name="twitter:title" content="Terraform  GCP Cloud Functions" />
  <meta
    name="twitter:description"
    content="Setup environment variables https://cloud.google.com/functions/docs/tutorials/terraform
PROJECT_ID=bubbly-journey-361318 REGION= BILLING_ACCOUNT_ID= gcloud config set project ${PROJECT_ID} We can create a project from cli
gcloud projects create PROJECT_ID_UNIQUE_NAME --name=&#34;My App&#34; --organization=nnnnn gcloud projects create PROJECT_ID_UNIQUE_NAME --name=&#34;My App&#34; --folder=nnnnnnn gcloud beta billing projects link ${PROJECT_ID} --billing-account=${BILLING_ACCOUNT_ID} Maybe you have to change the user. In my case
gcloud auth login login with privileged user make the changes can come back again to the less privileged user
gcloud auth login Create two folders"
  />
    <meta property="og:title" content="Terraform  GCP Cloud Functions" />
<meta property="og:description" content="Setup environment variables https://cloud.google.com/functions/docs/tutorials/terraform
PROJECT_ID=bubbly-journey-361318 REGION= BILLING_ACCOUNT_ID= gcloud config set project ${PROJECT_ID} We can create a project from cli
gcloud projects create PROJECT_ID_UNIQUE_NAME --name=&#34;My App&#34; --organization=nnnnn gcloud projects create PROJECT_ID_UNIQUE_NAME --name=&#34;My App&#34; --folder=nnnnnnn gcloud beta billing projects link ${PROJECT_ID} --billing-account=${BILLING_ACCOUNT_ID} Maybe you have to change the user. In my case
gcloud auth login login with privileged user make the changes can come back again to the less privileged user
gcloud auth login Create two folders" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://architect.proyectoomega.es/iac/terraform/terraformcloudfunctions/" /><meta property="article:section" content="IaC" />
<meta property="article:published_time" content="2022-04-03T08:16:01+02:00" />
<meta property="article:modified_time" content="2022-04-03T08:16:01+02:00" />

 <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Terraform  GCP Cloud Functions"/>
<meta name="twitter:description" content="Setup environment variables https://cloud.google.com/functions/docs/tutorials/terraform
PROJECT_ID=bubbly-journey-361318 REGION= BILLING_ACCOUNT_ID= gcloud config set project ${PROJECT_ID} We can create a project from cli
gcloud projects create PROJECT_ID_UNIQUE_NAME --name=&#34;My App&#34; --organization=nnnnn gcloud projects create PROJECT_ID_UNIQUE_NAME --name=&#34;My App&#34; --folder=nnnnnnn gcloud beta billing projects link ${PROJECT_ID} --billing-account=${BILLING_ACCOUNT_ID} Maybe you have to change the user. In my case
gcloud auth login login with privileged user make the changes can come back again to the less privileged user
gcloud auth login Create two folders"/>



  
  

  <link rel="stylesheet" href="https://fonts.cdnfonts.com/css/vielkalahizo"><link rel="stylesheet" href="https://fonts.cdnfonts.com/css/uno"><link rel="stylesheet" href="https://fonts.cdnfonts.com/css/saltstar"><link rel="stylesheet" href="https://fonts.cdnfonts.com/css/jabore">

  <link rel="stylesheet" href="https://architect.proyectoomega.es/css/foo.css"><link rel="stylesheet" href="https://architect.proyectoomega.es/css/bar.css">
</head>



  <body>
    
    
    <header class="shadow-bottom sticky-top bg-white">
      <nav class="navbar navbar-expand-md navbar-light">
  <div class="container px-2 px-md-0">
    <a class="navbar-brand px-2" href="/">
      
      
      
      Solutions Architect Resources
      
    </a>
    <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navigation"
      aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse text-center" id="navigation">
      <ul class="navbar-nav ml-auto">
        
        
        <li class="nav-item">
          <a class="nav-link text-dark" href="https://architect.proyectoomega.es/">Home</a>
        </li>
        
        
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle text-dark" href="#" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            blog
          </a>
          <div class="dropdown-menu">
            
            <a class="dropdown-item" href="https://architect.proyectoomega.es/blogcategory">Sample Blog Category</a>
            
          </div>
        </li>
        
        
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle text-dark" href="#" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            building
          </a>
          <div class="dropdown-menu">
            
            <a class="dropdown-item" href="https://architect.proyectoomega.es/building">Building</a>
            
          </div>
        </li>
        
        
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle text-dark" href="#" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            links
          </a>
          <div class="dropdown-menu">
            
            <a class="dropdown-item" href="https://architect.proyectoomega.es/links">Links</a>
            
          </div>
        </li>
        
        
      </ul>
      
    </div>
  </div>
</nav>

    </header>
    
     


<section class="single section-sm pb-0">
  <div class="container">
    <div class="row">
      <div class="col-lg-3">
        <div class="sidebar">
          <a
            class="back-btn"
            href="/"
            aria-label="back"
          ></a>
          <ul class="list-styled">
                     
 
<li
  data-nav-id="https://architect.proyectoomega.es/iac/"
  title="IaC"
  class="sidelist
  "
>
  <a href="https://architect.proyectoomega.es/iac/">
    IaC
  </a>
   
  <ul>
            
 
<li
  data-nav-id="https://architect.proyectoomega.es/iac/terraform/"
  title="Terraform"
  class="sidelist
  "
>
  <a href="https://architect.proyectoomega.es/iac/terraform/">
    Terraform
  </a>
   
  <ul>
            
 
<li
  data-nav-id="https://architect.proyectoomega.es/iac/terraform/terraformincloudshell/"
  title="Terraform in Cloud Shell"
  class="sidelist
  "
>
  <a href="https://architect.proyectoomega.es/iac/terraform/terraformincloudshell/">
    Terraform in Cloud Shell
  </a>
   
</li>
           
 
<li
  data-nav-id="https://architect.proyectoomega.es/iac/terraform/terraformcloudfunctions/"
  title="Terraform  GCP Cloud Functions"
  class="sidelist
  active"
>
  <a href="https://architect.proyectoomega.es/iac/terraform/terraformcloudfunctions/">
    Terraform  GCP Cloud Functions
  </a>
   
</li>
           
 
<li
  data-nav-id="https://architect.proyectoomega.es/iac/terraform/terraformcdk/"
  title="Terraform CDK"
  class="sidelist
  "
>
  <a href="https://architect.proyectoomega.es/iac/terraform/terraformcdk/">
    Terraform CDK
  </a>
   
</li>
           
 
<li
  data-nav-id="https://architect.proyectoomega.es/iac/terraform/terraform/"
  title="Terraform Environment Variables"
  class="sidelist
  "
>
  <a href="https://architect.proyectoomega.es/iac/terraform/terraform/">
    Terraform Environment Variables
  </a>
   
</li>
           
 
<li
  data-nav-id="https://architect.proyectoomega.es/iac/terraform/terraformmodules/"
  title="Terraform Modules"
  class="sidelist
  "
>
  <a href="https://architect.proyectoomega.es/iac/terraform/terraformmodules/">
    Terraform Modules
  </a>
   
</li>
   
  </ul>
  
</li>
   
  </ul>
  
</li>
                
          </ul>
        </div>
      </div>
      <div class="col-lg-9">
        <div class="p-lg-5 p-4 bg-white" id="content">
          <h2 class="mb-5" id="title">Terraform  GCP Cloud Functions</h2>
          
          <div class="content"><h3 id="setup-environment-variables">Setup environment variables</h3>
<p><a href="https://cloud.google.com/functions/docs/tutorials/terraform"
   title="https://cloud.google.com/functions/docs/tutorials/terraform" 
   target="_blank" rel="nofollow noopener">
  https://cloud.google.com/functions/docs/tutorials/terraform</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>PROJECT_ID<span style="color:#f92672">=</span>bubbly-journey-361318
</span></span><span style="display:flex;"><span>REGION<span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>BILLING_ACCOUNT_ID<span style="color:#f92672">=</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>gcloud config set project <span style="color:#e6db74">${</span>PROJECT_ID<span style="color:#e6db74">}</span>
</span></span></code></pre></div><p>We can create a project from cli</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>gcloud projects create PROJECT_ID_UNIQUE_NAME --name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;My App&#34;</span> --organization<span style="color:#f92672">=</span>nnnnn
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>gcloud projects create PROJECT_ID_UNIQUE_NAME --name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;My App&#34;</span> --folder<span style="color:#f92672">=</span>nnnnnnn
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>gcloud beta billing projects link <span style="color:#e6db74">${</span>PROJECT_ID<span style="color:#e6db74">}</span> --billing-account<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>BILLING_ACCOUNT_ID<span style="color:#e6db74">}</span>
</span></span></code></pre></div><p>Maybe you have to change the user. In my case</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>gcloud auth login
</span></span></code></pre></div><p>login with privileged user
make the changes can come back again to the less privileged user</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>gcloud auth login
</span></span></code></pre></div><p>Create two folders</p>
<ul>
<li>src</li>
<li>terraform</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>.
</span></span><span style="display:flex;"><span>├── src
</span></span><span style="display:flex;"><span>└── terraform
</span></span></code></pre></div><p>On the root folder initialize npm</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>npm init
</span></span></code></pre></div><p>And install whatever package you need.</p>
<p>Create src/index.js
Modify package.json &ldquo;main&rdquo;: &ldquo;src/index.js&rdquo;,</p>
<p>terraform/backend.tf to keep state in local.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">terraform</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">backend</span> <span style="color:#e6db74">&#34;local&#34;</span> {}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>terraform/variables.tf</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">variable</span> <span style="color:#e6db74">&#34;project&#34;</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">default</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;PROJECT_ID&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">variable</span> <span style="color:#e6db74">&#34;region&#34;</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">default</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;us-central1&#34;</span> <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#a6e22e">Choose</span> <span style="color:#a6e22e">a</span> <span style="color:#a6e22e">region</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></div>
          
          <p class="post-meta border-bottom pb-3 mb-0 mt-3">
            Updated on 03 Apr 2022
          </p>
          <nav class="pagination mt-3">
            
                      
                                               
                     
                          
                  
                     
                         
                         
              
              
                                                 
                         
                         
                         
              
                                    
                         
              
              
                                                 
                         
                         
                         
                         
              
              
                                                 
              
                                    
              
                                    
              
                                    
              
                                    
              
              
                                    
              
                                                 
              
              
                
            <a
              class="nav nav-prev"
              href="https://architect.proyectoomega.es/iac/terraform/terraformincloudshell/"
              aria-label="Previous page"
              ><i class="ti-arrow-left mr-2"></i>
              <span class="d-none d-md-block">Terraform in Cloud Shell</span></a
            >
             
            <a
              class="nav nav-next"
              href="https://architect.proyectoomega.es/iac/terraform/terraformcdk/"
              aria-label="Previous page"
            >
              <span class="d-none d-md-block">Terraform CDK</span
              ><i class="ti-arrow-right ml-2"></i
            ></a>
            
          </nav>
        </div>
      </div>
    </div>
  </div>
</section>







    
<footer class="section pb-4">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-8 text-md-left text-center">
        <p class="mb-md-0 mb-4">Proyecto Omega</p>
      </div>
      <div class="col-md-4 text-md-right text-center">
        <ul class="list-inline">
          
        </ul>
      </div>
    </div>
  </div>
</footer>




<script src="https://architect.proyectoomega.es/js/script.min.js"></script>


  </body>
  
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5K6JCB8"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  
  </html>